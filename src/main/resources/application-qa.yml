# QA/Test Environment Configuration
# Uses file-based H2 for testing in a QA environment

spring:
  # Data Source - H2 File-based (QA environment)
  # Using file-based H2 for persistent data during QA testing
  datasource:
    url: jdbc:h2:file:./data/transport_qa;DB_CLOSE_ON_EXIT=FALSE;AUTO_RECONNECT=TRUE
    username: sa
    password:
    driver-class-name: org.h2.Driver
  
  # JPA Configuration for QA
  jpa:
    database-platform: org.hibernate.dialect.H2Dialect
    hibernate:
      ddl-auto: none  # Liquibase manages schema
    show-sql: false
    properties:
      hibernate:
        jdbc:
          batch_size: 20
        order_inserts: true
        order_updates: true
  
  # H2 Console - Enabled for QA monitoring
  h2:
    console:
      enabled: true
      path: /h2-console
      settings:
        web-allow-others: false
  
  # Liquibase
  liquibase:
    enabled: true
    contexts: qa
    default-schema: public
  
  # Spring AI - Can use cloud-based LLM for QA
  ai:
    ollama:
      base-url: ${OLLAMA_BASE_URL:http://localhost:11434}
      chat:
        enabled: ${AI_ENABLED:false}
        model: ${OLLAMA_MODEL:tinyllama}
        options:
          temperature: 0.5
          top-p: 0.8

# Server Configuration
server:
  port: 8080
  compression:
    enabled: true

# QA Logging
logging:
  level:
    org.example.transport: INFO
    org.springframework.web: INFO
    org.hibernate.SQL: INFO
    liquibase: INFO
  file:
    name: logs/transport-qa.log
    max-size: 10MB
    max-history: 30

# Optimizer Configuration for QA
tour:
  optimizer:
    algorithm: ${OPTIMIZER_ALGORITHM:CLARKE_WRIGHT}

# QA Environment Notes
# - Uses file-based H2 database: ./data/transport_qa.mv.db
# - H2 Console: http://localhost:8080/h2-console (JDBC URL: jdbc:h2:file:./data/transport_qa)
# - Swagger UI: http://localhost:8080/swagger-ui.html
# - Data persists between restarts for QA testing
